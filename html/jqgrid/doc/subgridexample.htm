<html><head>
   <title>Subgrid example</title>
   <meta name="generator"  content="HelpMaker">
   <meta name="keywords"  content="Welcome">
   <link rel="stylesheet"  type="text/css"  href="hm.css"></head>
<body bgcolor="#FFFCEA">

<table width="100%"  border="0"  cellspacing="0"  cellpadding="2"  bgcolor="#C0C0C0">
  <tr>
    <td align="left">
      <body><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">Subgrid example</span></font></div></body></html>

    </td>
    <td align="right">
      <font face="Arial"  size="2">
        <a href="settingsubgrid.htm">Previous</a>&nbsp;<a href="WhatisjqGrid.htm">Top</a>&nbsp;<a href="gridassubgrid.htm">Next</a>
      </font>
    </td>
  </tr></table>
<hr><body><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">Considering our example lets suppose that there is a need to display the item lines of 
every invoice in subgrid way.</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">The Java script code should look like this.</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">&lt;script type=&quot;text/javascript&quot;&gt;</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">jQuery(document).ready(function(){ </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">       jQuery(&quot;#list&quot;).jqGrid({</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  url:'example.php',</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  datatype: 'xml',</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  colNames:['Inv No','Date', 'Amount','Tax','Total','Notes'],</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  colModel :[ </span></font></div><div align="left"  style="margin-left:12mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">{name:'invid',index:'invid', width:55}, </span></font></div><div align="left"  style="margin-left:12mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">{name:'invdate',index:'invdate', width:90}, </span></font></div><div align="left"  style="margin-left:12mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">{name:'amount',index:'amount', width:80, align:'right'}, </span></font></div><div align="left"  style="margin-left:12mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">{name:'tax',index:'tax', width:80, align:'right'}, </span></font></div><div align="left"  style="margin-left:12mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">{name:'total',index:'total', width:80,align:'right'}, </span></font></div><div align="left"  style="margin-left:12mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">{name:'note',index:'note', width:150, sortable:false} ],</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  pager: jQuery('#pager'),</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  rowNum:10,</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  rowList:[10,20,30],</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  sortname: 'id',</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  sortorder: &quot;desc&quot;,</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  viewrecords: true,</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  imgpath: 'themes/basic/images',</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">  caption: &ldquo;My first grid,</span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>&#160;&#160;&#160; subGrid: true,</b></span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>&#160;&#160;&#160; subGridUrl : &quot;subgrid.php&quot;,</b></span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>&#160;&#160;&#160; subGridModel [ {</b></span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; name:&#160; ['No',</b></span></font><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>'Item','Qty', 'Unit', 'Line Total'],</b></span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; width : [55,200,80,80,80],</b></span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; params: ['invdate'] }</b></span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><b>&#160;&#160;&#160; ]</b></span></font></div><div align="left"  style="margin-left:0mm; margin-right:0mm; text-indent:12mm; margin-top:0.00mm; margin-bottom:0.00mm;"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">}); </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">}); </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">&lt;/script&gt;</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">The next step is to configure the subgrid.php file. The example is in PHP and MySQL</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">&lt;?php</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">// get the id passed automatically to the request</span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">$id = $_GET['id'];</span></font><font face="Bitstream Vera Sans"  color="#800000"  size="1"><span style=" font-size:9pt"> </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">// get the invoice data passed to this request via params array in</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">//subGridModel. We do not use it here - this is only demostration</span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">$date_inv = $_GET['invdate'];</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">// connect to the database </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">$db = mysql_connect($dbhost, $dbuser, $dbpassword) or die(&quot;Connection Error: &quot; . 
mysql_error()); </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">mysql_select_db($database) or die(&quot;Error conecting to db.&quot;); </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">// construct the query</span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">$SQL = &quot;SELECT num, item, qty, unit FROM invlines WHERE id=&quot;.$id.&quot; ORDER BY 
item&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">$result = mysql_query( $SQL ) or die(&quot;Couldn?t execute query.&quot;.mysql_error()); </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">// set the header information</span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">if ( stristr($_SERVER[&quot;HTTP_ACCEPT&quot;],&quot;application/xhtml+xml&quot;) ) { </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;header(&quot;Content-type: application/xhtml+xml;charset=utf-8&quot;); </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">} else { </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;header(&quot;Content-type: text/xml;charset=utf-8&quot;); </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">} </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">echo &quot;&lt;?xml version='1.0' encoding='utf-8'?&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">echo &quot;&lt;rows&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">// be sure to put text data in CDATA </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">while($row = mysql_fetch_array($result,MYSQL_ASSOC)) { </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;echo &quot;&lt;row&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;echo &quot;&lt;cell&gt;&quot;. $row[num].&quot;&lt;/cell&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;echo &quot;&lt;cell&gt;&lt;![CDATA[&quot;. $row[item].&quot;]]&gt;&lt;/cell&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;echo &quot;&lt;cell&gt;&quot;. $row[qty].&quot;&lt;/cell&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;echo &quot;&lt;cell&gt;&quot;. $row[unit].&quot;&lt;/cell&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;echo &quot;&lt;cell&gt;&quot;. number_format($row[qty]*$row[unit],2,'.',' ').&quot;&lt;/cell&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;echo &quot;&lt;/row&gt;&quot;; </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">} </span></font></div><div align="left"><font face="Bitstream Vera Sans"  color="#800000"><span style=" font-size:10pt">echo &quot;&lt;/rows&gt;&quot;;</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">?&gt;</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt">After this the grid will look like this.</span></font></div><div align="left"><font face="Bitstream Vera Sans"><span style=" font-size:10pt"><br></span></font></div><div align="left"><img src="subgridexampleb1.PNG"  width="670"  height="263"  border="0"  alt="graphic"></div></body></html>

</body></html>
